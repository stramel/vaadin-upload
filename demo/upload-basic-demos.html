<dom-module id="upload-basic-demos">
  <template>
    <style>
       :host {
        display: block;
      }

    </style>


    <h3>Backwards Compatible Upload Usage</h3>
    <p>
      Wrapper around the new components that recreates the previous `vaadin-upload` version
      to create an easy migration path.
    </p>
    <p>
      <strong>NOTE:</strong> Please note this element has been deprecated in favor of the
      smaller, more modular upload components.
    </p>
    <p>
      <strong>TODO:</strong> Fix event bubbling to this element.
    </p>
    <vaadin-demo-snippet id='upload-basic-demos-basic-usage'>
      <template preserve-content>
        <vaadin-upload target="https://httpbin.org/post"></vaadin-upload>
      </template>
    </vaadin-demo-snippet>


    <h3>New Components Basic Usage</h3>
    <p>
      Recreates the previous `vaadin-upload` element using the new components. This approach allows
      for more customization and control of your implementation.
    </p>
    <vaadin-demo-snippet id='upload-basic-demos-basic-usage'>
      <template preserve-content>
        <dom-bind>
          <template>

            <vaadin-upload-dropzone>
              <vaadin-upload-multiple id="upload"
                slot="upload"
                files="{{files}}"
              ></vaadin-upload-multiple>
              <vaadin-upload-ajax-uploader
                files="{{files}}"
                url="https://httpbin.org/post"
                auto
                hidden
              ></vaadin-upload-ajax-uploader>

              Drop Files here...<br>

              <dom-repeat items="[[files]]" as="file">
                <template>
                  <vaadin-upload-file-item file="[[file]]"></vaadin-upload-file-item>
                </template>
              </dom-repeat>
            </vaadin-upload-dropzone>

          </template>
        </dom-bind>
      </template>
    </vaadin-demo-snippet>

    <h3>Upload Request Properties</h3>
    <p>
      Customize the uploader request easily.
    </p>
    <vaadin-demo-snippet id='upload-basic-demos-basic-usage'>
      <template preserve-content>
        <dom-bind>
          <template>

            <vaadin-upload-dropzone>
              <vaadin-upload-multiple id="upload"
                slot="upload"
                files="{{files}}"
              ></vaadin-upload-multiple>
              <vaadin-upload-ajax-uploader
                files="{{files}}"
                method="PUT"
                url="https://httpbin.org/put"
                headers="{'X-Custom-Header': 'value'}"
                form-data-name="my-attachment"
                timeout="300000"
                hidden
              ></vaadin-upload-ajax-uploader>

              Drop Files here...<br>

              <dom-repeat items="[[files]]" as="file">
                <template>
                  <vaadin-upload-file-item file="[[file]]"></vaadin-upload-file-item>
                </template>
              </dom-repeat>
            </vaadin-upload-dropzone>

          </template>
        </dom-bind>
      </template>
    </vaadin-demo-snippet>

    <h3>Disabling Multiple File Selection</h3>
    <p>
      Prevent mutliple file selection and disable upon reaching the max number of files
    </p>
    <vaadin-demo-snippet id='upload-basic-demos-basic-usage'>
      <template preserve-content>
        <dom-bind>
          <template>

            <vaadin-upload-multiple id="upload"
              slot="upload"
              files="{{files}}"
              max-files="1"
            ></vaadin-upload-multiple>
            <vaadin-upload-ajax-uploader
              files="{{files}}"
              url="https://httpbin.org/post"
              auto
              hidden
            ></vaadin-upload-ajax-uploader>

            <dom-repeat items="[[files]]" as="file">
              <template>
                <vaadin-upload-file-item file="[[file]]"></vaadin-upload-file-item>
              </template>
            </dom-repeat>

          </template>
        </dom-bind>
      </template>
    </vaadin-demo-snippet>

    <h3>Single File Upload</h3>
    <p>
      Allows for only one file upload and replacing previous upload
    </p>
    <vaadin-demo-snippet id='upload-basic-demos-basic-usage'>
      <template preserve-content>
        <dom-bind>
          <template>

            <vaadin-upload-single id="upload"
              slot="upload"
              files="{{files}}"
            ></vaadin-upload-single>
            <vaadin-upload-ajax-uploader
              files="{{files}}"
              url="https://httpbin.org/post"
              auto
              hidden
            ></vaadin-upload-ajax-uploader>

            <dom-if if="[[files.length]]">
              <template>
                <vaadin-upload-file-item file="[[files.0]]"></vaadin-upload-file-item>
              </template>
            </dom-if>

          </template>
        </dom-bind>
      </template>
    </vaadin-demo-snippet>

    <h3>LocalStorage Uploader Usage</h3>
    <vaadin-demo-snippet id='upload-basic-demos-basic-usage'>
      <template preserve-content>
        <dom-bind>
          <template>

            <vaadin-upload-dropzone clickable>
              <vaadin-upload-multiple id="upload"
                slot="upload"
                files="{{files}}"
              ></vaadin-upload-multiple>
              <vaadin-upload-localstorage-uploader
                files="{{files}}"
                hidden
              ></vaadin-upload-localstorage-uploader>

              Click or Drop Files here...
            </vaadin-upload-dropzone>

            <br>

            <dom-repeat items="[[files]]" as="file">
              <template>
                <vaadin-upload-file-item file="[[file]]"></vaadin-upload-file-item>
              </template>
            </dom-repeat>

          </template>
        </dom-bind>
      </template>
    </vaadin-demo-snippet>


    <h3>Single Upload with Auto Usage</h3>
    <vaadin-demo-snippet id='upload-basic-demos-basic-usage'>
      <template preserve-content>
        <dom-bind>
          <template>

            <vaadin-upload-dropzone clickable>
              <vaadin-upload-single id="upload"
                slot="upload"
                files="{{files}}"
              ></vaadin-upload-single>
              <vaadin-upload-ajax-uploader
                files="{{files}}"
                url="https://httpbin.org/post"
                auto
                hidden
              ></vaadin-upload-ajax-uploader>

              Click or Drop Files here...
            </vaadin-upload-dropzone>

            <br>

            <dom-if if="[[files.length]]">
              <template>
                <vaadin-upload-file-item file="[[files.0]]"></vaadin-upload-file-item>
              </template>
            </dom-if>

          </template>
        </dom-bind>
      </template>
    </vaadin-demo-snippet>

    <h3>Setting Restrictions on Files to Upload</h3>
    <vaadin-demo-snippet id='upload-basic-demos-setting-restrictions-on-files-to-upload'>
      <template preserve-content>

        <vaadin-upload-dropzone>
          <vaadin-upload-multiple id="rejectEventDemo"
            slot="upload"
            files="{{files}}"
            accept="application/pdf"
            max-files="3"
            max-file-size="1"
            unit="MB"
          ></vaadin-upload-multiple>
          <vaadin-upload-ajax-uploader
            files="{{files}}"
            url="https://httpbin.org/post"
            auto
            hidden
          ></vaadin-upload-ajax-uploader>

          Up to 3 PDF files, 1 MB each
        </vaadin-upload-dropzone>
        <br>
        <dom-repeat items="[[files]]" as="file">
          <template>
            <vaadin-upload-file-item file="[[file]]"></vaadin-upload-file-item>
          </template>
        </dom-repeat>

        <paper-toast id="rejectToast"></paper-toast>

        <script>
          window.addDemoReadyListener('#upload-basic-demos-setting-restrictions-on-files-to-upload', (document) => {
            const upload = document.querySelector('vaadin-upload-multiple#rejectEventDemo');
            const toast = document.querySelector('paper-toast#rejectToast');

            upload.addEventListener('file-reject', ({detail}) => {
              toast.text = `${detail.file.name} Error: ${detail.error}`;
              toast.open();
            });
          });
        </script>
      </template>
    </vaadin-demo-snippet>
  </div>
  </template>
  <script>
    class UploadBasicDemos extends DemoReadyEventEmitter(UploadDemo(Polymer.Element)) {
      static get is() {
        return 'upload-basic-demos';
      }
    }
    customElements.define(UploadBasicDemos.is, UploadBasicDemos);
  </script>
</dom-module>
